<ion-content [fullscreen]="true" scroll-y="false" class="no-scroll">
  <div class="screen">
    <div class="main">
      <section class="card">
        <div class="dots" aria-label="Fortschritt">
          <span class="dot active"></span>
          <span class="dot active"></span>
          <span class="dot active"></span>
          <span class="dot"></span>
          <span class="dot"></span>
          <span class="dot"></span>
        </div>

        <h1 class="title">Jagt das Schwein</h1>

        <div class="stats">
          <div>Zeit Verbleibend: <b>{{ timeLeft }}</b></div>
          <div>Schnitzel : <b>{{ reward }}x</b></div>
        </div>

        <!-- ROTATE BOX -->
        <div class="rotate-frame">
          <div class="rotate-placeholder">
            <div class="rotate-illustration">
              <div class="phone-icon" [style.transform]="'rotate(' + phoneRotation + 'deg)'">
                <div class="speaker"></div>
                <div class="screen-inner"></div>
                <div class="home-dot"></div>
              </div>
            </div>

            <div class="rotate-text">
              @if (!completed) {
              <ng-container>
                @if (isUpsideDown) {

                <ng-container>
                  Halte so… <b>{{ (HOLD_DURATION - holdTime).toFixed(1) }}s</b>
                </ng-container>

                }
                @else {

                <ng-template>
                  Drehe dein Handy ins <b>aufem Kopf</b>.
                </ng-template>
                }
              </ng-container>
              }

              @else {
              <ng-template #doneTpl>
                <b>Perfekt! </b> Aufgabe abgeschlossen!
              </ng-template>
              }
            </div>

            <!-- Progress -->
            @if (isUpsideDown && !completed) {

            <div class="hold-box">
              <div class="hold-row">
                <span>Halte Position</span>
                <span><b>{{ holdTime.toFixed(1) }}s</b> / {{ HOLD_DURATION
                  }}s</span>
              </div>

              <div class="hold-bar">
                <div class="hold-bar-inner" [style.width.%]="progressPercent"></div>
              </div>
            </div>
            }

            <!-- Button -->
            @if (completed) {
            <button class="done-btn" (click)="onDone()">Erledigt</button>
            }
          </div>
        </div>

        <!-- Mission -->
        <div class="mission">
          <h2>Aufgabe</h2>
          <p class="hint">
            Diese Aufgabe zählt erst, wenn du das Gerät drehst und kurz wartest.
          </p>

          <div class="redline">Status: {{ status }}</div>

          <app-button variant="text" (clicked)="onSkip()">
            Überspringen
          </app-button>
        </div>
      </section>
    </div>

    <app-button class="bottom" variant="outline-icon" routerLink="/leaderboard">
      <p>Abbrechen</p>
    </app-button>
  </div>
</ion-content>