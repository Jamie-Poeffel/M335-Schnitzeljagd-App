<ion-content [fullscreen]="true" scroll-y="false" class="no-scroll">
  <div class="screen">
    <div class="main">
      <section class="card">

        <!-- progress dots -->
        <div class="dots">
          <span class="dot active"></span>
          <span class="dot"></span>
          <span class="dot"></span>
          <span class="dot"></span>
          <span class="dot"></span>
          <span class="dot"></span>
        </div>

        <h1 class="title">Jagd den Schwein</h1>

        <div class="stats">
          <div>Zeit Verbleibend: <b>{{ timeRemaining }}</b></div>
          <div>Schnitzel : <b>0x</b></div>
        </div>

        <!-- map -->
        <div class="map-frame">
          <iframe
            src="https://www.google.com/maps/embed?pb=..."
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade">
          </iframe>
        </div>

        <!-- mission -->
        <div class="mission">
          <h2>Walk to the designated Area</h2>
          <p class="hint">Find this point in the map and walk towards it</p>

          <div [class]="getDistanceColorClass()">
            Distanz: {{ getFormattedDistance() }}
          </div>

          @if (isWithinTargetDistance) {
            <div class="success-message">
              Ziel erreicht! Sie sind innerhalb von {{ TARGET_DISTANCE_THRESHOLD }}m
            </div>
          }

          @if (locationError) {
            <div class="error-message">
              {{ locationError }}
              <button class="retry-button" (click)="retryLocationPermission()">
                Erneut versuchen
              </button>
            </div>
          }

          @if (isTrackingLocation && !isWithinTargetDistance) {
            <div class="status-message">Standort wird verfolgt</div>
          }

          @if (isWithinTargetDistance) {
            <app-button variant="filled" (click)="onContinue()">
              <p>Weiter</p>
            </app-button>
          }

          @if (!isWithinTargetDistance) {
            <app-button variant="text" routerLink="/qr-scanner">
  Ãœberspringen
</app-button>
          }
        </div>

      </section>
    </div>

    <app-button class="bottom" variant="outline-icon">
      <p>Abbrechen</p>
    </app-button>
  </div>
</ion-content>
